<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Énigme 11 - L'Ange Gabiancono</title>
  <link rel="stylesheet" href="responsive.css">
  <style>
    body {
      background-color: black;
      color: #FFD700;
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 20px;
    }

    .team-name {
      position: fixed;
      top: 10px;
      left: 20px;
      background: rgba(255, 215, 0, 0.1);
      padding: 10px 20px;
      border: 1px solid #FFD700;
      border-radius: 10px;
      font-size: 16px;
      z-index: 1000;
    }

    .score-box {
      position: fixed;
      top: 10px;
      right: 20px;
      background: rgba(255, 215, 0, 0.1);
      padding: 10px 20px;
      border: 1px solid #FFD700;
      border-radius: 10px;
      font-size: 16px;
      z-index: 1000;
    }

    .main-content {
      margin-top: 80px;
      position: relative;
      z-index: 1;
    }

    .message-container {
      margin: 20px auto;
      max-width: 800px;
      text-align: justify;
      line-height: 1.6;
    }

    .letter {
      opacity: 0;
      position: absolute;
      transition: all 0.5s ease-in-out;
    }

    .question-container {
      margin: 20px auto;
      max-width: 600px;
    }

    input[type="text"] {
      padding: 10px;
      font-size: 18px;
      width: 80%;
      max-width: 300px;
      margin: 10px;
      background: black;
      color: #FFD700;
      border: 2px solid #FFD700;
      text-align: center;
    }

    button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 18px;
      background-color: black;
      color: #FFD700;
      border: 2px solid #FFD700;
      cursor: pointer;
      border-radius: 5px;
    }

    button:hover {
      background-color: #FFD700;
      color: black;
    }

    .hidden-text {
      opacity: 0;
      max-height: 0;
      overflow: hidden;
      transition: max-height 1s ease-in-out, opacity 1s ease-in-out;
      font-size: 18px;
      margin: 20px auto;
      padding: 15px;
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.1);
      box-shadow: 0px 0px 10px rgba(255, 255, 255, 0.2);
      text-align: justify;
      max-width: 800px;
    }

    .parchment-effect {
      opacity: 1 !important;
      max-height: 1000px !important;
    }
  </style>
</head>
<body>
  <div class="team-name" id="teamDisplay">Équipe: ...</div>
  <div class="score-box" id="scoreDisplay">Score: 100</div>

  <div class="main-content">
    <div class="message-container" id="message-container"></div>

    <div id="question-container">
      <p>Quel est le nom de cet ange ?</p>
      <input type="text" id="user-response" placeholder="Votre réponse ici">
      <br>
      <button onclick="checkAnswer()">Valider</button>
      <button onclick="showHint()">Indice (-5 points)</button>
      <button onclick="showMore()">En savoir plus</button>

      <!-- Indice -->
      <div id="hint-text" class="hidden-text">
        Son nom est écrit sous son auréole 
      </div>

      <!-- En savoir plus -->
      <div id="more-text" class="hidden-text">
        <p>
          Chateaubriand raconte dans ses Mémoires d'outre-tombe : « Quand la contagion
commença de se ralentir, M. de Belsunce, à la tête de son clergé, se transporta à l'église des
Accoules : monté sur une esplanade d'où l'on découvrait Marseille, les campagnes, les ports et la
mer, il donna la bénédiction, comme le pape à Rome, bénit la ville et le monde (Urbi et Orbi) :
quelle main plus courageuse et plus pure pouvait faire descendre sur tant de malheurs les
bénédictions du ciel ? 
        </p>
      </div>
    </div>
  </div>

  <script>
    const params = new URLSearchParams(window.location.search);
    let score = parseInt(params.get("score")) || 100;
    const team = params.get("team") || "Anonyme";
    document.getElementById("teamDisplay").textContent = "Équipe: " + team;

    const scoreDisplay = document.getElementById("scoreDisplay");
    scoreDisplay.textContent = `Score: ${score}`;

    const message = `
Monseigneur de Belsunce est représenté ici avec 13 enfants qu’il a sauvé de la mort lors de la
 grande peste de 1720. Il frappa les esprits par son dévouement auprès des malades et ses gestes
spectaculaires pour chasser le fléau du pays, en exorcisant la maladie depuis le clocher des
accoules.
Depuis la cathédrale, partez en direction de l’Est jusqu’à la rue Sainte-Françoise, et remontez-là
jusqu’à la place des 13 coins. Cherchez dans un rayon de 20m de la place les traces qu’un ange
aurait pu laisser en passant par là. Celui-ci doit vous donner un outil qui permettra aux générations
futures d’obtenir la clé du temps. Cet ange à un nom, lequel ?
    `.trim();

    const container = document.getElementById("message-container");
    const letters = message.split("");

    function createLetterAnimation(index, char) {
      if (char === "\n") return;
      const letterSpan = document.createElement("span");
      letterSpan.classList.add("letter");
      letterSpan.textContent = char;
      letterSpan.style.top = `${Math.random() * 100}%`;
      letterSpan.style.left = `${Math.random() * 100}%`;
      container.appendChild(letterSpan);
      setTimeout(() => {
        letterSpan.style.opacity = "1";
        letterSpan.style.transform = `translate(${index * 10}px, ${index % 2 === 0 ? "10px" : "-10px"}) scale(1.2)`;
        letterSpan.style.left = "0";
        letterSpan.style.top = "0";
        letterSpan.style.position = "relative";
      }, index * 2);
    }

    letters.forEach((char, index) => createLetterAnimation(index, char));

    function checkAnswer() {
      const userInput = document.getElementById("user-response").value.trim().toUpperCase();
      if (userInput === "GABIANCONO") {
        window.location.href = `page16.html?score=${score}&team=${encodeURIComponent(team)}`;
      } else {
        alert("Mauvaise réponse, réessayez !");
      }
    }

    function showHint() {
      const hintText = document.getElementById("hint-text");
      hintText.classList.add("parchment-effect");
      if (!hintText.classList.contains("already-used")) {
        score = Math.max(0, score - 5);
        scoreDisplay.textContent = `Score: ${score}`;
        hintText.classList.add("already-used");
      }
    }

    function showMore() {
      const moreText = document.getElementById("more-text");
      moreText.classList.toggle("parchment-effect");
    }
  </script>
</body>
</html> 
